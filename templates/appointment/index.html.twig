{% extends 'base.html.twig' %}

{% block title %}  Mes rendez-vous {% endblock %}

{% block body %}
<h2 class="text-3xl text-center font-bold my-10">Les rendez-vous de {{ app.user.firstName }}</h2>

<div class=" mt-10 p-4">
    {% for appointment in appointments %}

        <div class=" border rounded-lg shadow bg-white  mb-12">
            <div class="text-left ">
               <div class="rounded-t-lg bg-blue-500 py-3 flex ">
		 
		<p class="m-1 pl-3 text-xl"><i class="fa-regular fa-calendar mr-1"></i>{{ appointment.dateTime|date("d/m/Y") }}</p>
		 
		<p class="m-1 pl-3 text-xl"><i class="fa-regular fa-clock mr-1"></i>{{ appointment.dateTime|date("H:i") }}</p>
		<p class="flex-row-reverse" >{{ appointment.statu.name }}</p>
		</div>

		<h5 class="text-lg px-2 font-bold " id="maModaleLabel{{ loop.index }}">Rendez-vous avec {{ appointment.planing.doctor.firstName }} {{ appointment.planing.doctor.lastName }}</h5>
                <p class="m-1"><i class="fa-solid fa-location-dot"></i> {{ appointment.planing.doctor.zipCode }}, {{ appointment.planing.doctor.city }}</p>
                <p class="m-1"><i class="fa fa-phone"></i> {{ appointment.planing.doctor.phoneNumber }}</p>
                <p class="m-1"><i class="fa fa-envelope"></i> {{ appointment.planing.doctor.email }}</p>
		
		



                <!-- Button to trigger the modal -->
                <button type="button" class=" py-2 px-4 rounded bg-red-500 m-2" aria-label="Annuler le rendez vous">
                   <i class="fa-solid fa-xmark"></i> Annuler
                </button>
            </div>
            <!-- Modal -->
            <div class="modal-overlay fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 hidden" id="maModaleOverlay{{ loop.index }}">
                <div class="modal-content bg-white p-6 rounded shadow-md w-full max-w-lg mx-4" role="dialog" aria-modal="true" aria-labelledby="maModaleLabel{{ loop.index }}" tabindex="-1">
                    <div class="flex justify-between items-center">
                        <h5 class="modal-title text-xl font-bold" id="maModaleLabel{{ loop.index }}">Rendez-vous avec {{ appointment.planing.doctor.firstName }} {{ appointment.planing.doctor.lastName }}</h5>
                        <button class="close-btn text-xl" id="closeModale{{ loop.index }}" aria-label="Fermer la modale">&times;</button>
                    </div>
                    <div class="modal-body mt-4 mb-6">
                        <!-- Display appointment details -->
                        <div class="border p-3 mb-3">
                            <h2 class="font-bold text-lg">Date et heure du rendez-vous</h2>
                            <p>{{ appointment.dateTime|date("d/m/Y H:i") }}</p>
                        </div>
                        <div class="border p-3 mb-3">
                            <h2 class="font-bold text-lg">Statut</h2>
                            <p>{{ appointment.statu.name }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
</div>

<style>
    .modal-overlay.active {
        display: flex;
    }
</style>

                                  
{% endblock %}
